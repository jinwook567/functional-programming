# 함수 본문을 콜백으로 바꾸기

- 코드를 고차 함수로 만드는 강력한 방법.
- 함수 이름에 있는 암묵적 인자가 보일 때 수행하면 좋다. (비슷한 역할을 하는 함수들이 많을 때.)
- 고차 함수의 좋은 점은 코드를 추상화 할 수 있다는 점이다. 특정한 케이스마다 다르게 동작하는 경우를 매번 새로운 함수를 정의하는게 아닌, 함수를 인자로 받아서 대신 수행한다.
- JS의 배열의 map, forEach, filter 메소드의 경우, 수동 루프를 추상화한, 고차함수이다.
- `withLogging` 함수는 전형적인 고차함수의 예시라고 볼 수 있다. 이러한 사고를 하려고 노력해야한다.
- 또한 함수를 인자로 받는 것의 큰 장점은, 평가 시점을 뒤로 미룰 수 있다는 것이다. 선택적으로 호출되거나, 어떠한 문맥에서 호출될 수도 있다. (try-catch문 내에서 등)

# 일급인 것과 아닌 것.

- 일급이 아닌 것을 일급으로 바꾸는 능력은 함수형 프로그래머에게 중요한 덕목이다.
- 예시로 + 연산은 일급이 아니다. 하지만 `(a,b) => a+b`라는 함수는 일급이다. 이처럼 일급이 아닌 것을 일급으로 만들어서 활용한다.

# 추상화 벽

- 어떤 객체를 변경시키는 함수가 중복되어, 객체의 필드명과 value를 받아서 할당해주는 함수가 있다고 가정해보자. 이 함수는 추상화 벽 원칙을 위반하는 것인가?
  - 그렇지 않다. 세부 구현은 노출되지 않았기 때문이다. 또한 필드명은 일급으로, 언어의 모든 기능을 활용해서 처리해줄 수 있다. (필드명이 바뀌면 내부적으로는 변경시켜주고, 외부는 유지.)

# 데이터 지향

- 데이터를 데이터 그대로 사용하면, 여러가지 방법으로 해석할 수 있다는 장점이 있다.
- 제한된 API로 정의하면 데이터를 제대로 활용할 수 없다.
- 객체지향의 캡슐화를 완벽히 위배하는 원칙이다. 모든 패러다임에는 장단이 있는 것 같다.
  - 캡슐화를 하면 데이터 구조를 바꾸기 더 쉬워진다. 하지만 제한된 API를 사용해야한다.
  - 캡슐화를 하지 않으면 데이터 구조를 바꾸기 더 어려워진다. 하지만 불필요한, 제한된 API를 정의할 필요도, 사용할 필요도 없다. 더 자유롭게 사용이 가능하다.

# 함수를 리턴하는 함수

- 함수를 리턴하는 함수를 사용하면, 리턴된 함수에 어떠한 동작을 자동으로 추가시켜 줄 수 있다.
- `withLogging` 함수를 즉시 실행 시키는게 아닌, 함수를 리턴하면 logging 로직이 적용된 함수를 받을 수 있다.
  - 느슨하게 결합시켜, 좀 더 쉽게 변경시킬 수 있다. `wrappLogging`이라는 함수를 사용해서 새로운 함수를 탄생시키고 해당 함수는 코드에서 사용된다. 해당 함수는 쉽게 변경될 수 있다.

# reduce

- reduce 함수의 초기값 규칙
  - 계산이 어떠한 값에서 시작되는가? (더하기 연산이라면 0, 곱셈 연산이라면 1)
  - 만약에 배열이 비어있다면, 어떠한 값을 리턴해야 하는가?
- reduce로 할 수 있는 것들
  - 실행 취소/복귀: 사용자 입력 리스트에 reduce를 적용한 것이 현재의 값, 취소는 리스트의 마지막 사용자 입력 없앰.

# 함수형 도구 체이닝

1. 단계에 이름 붙이기 (함수로 추출하기)
2. 콜백에 이름 붙이기 (함수로 추출하지 않고, 콜백만 추출하여 이름 붙이기)

   - 콜백을 추출하였을 때 좋은 점은, 콜백 함수를 재사용 할 수 있다는 것이다.
   - 코드의 추상화 수준이 높아진다.

3. 두 방법을 비교
   - 상황에 따라 더 좋은 방법을 선택하면 되지만, 대부분 2번째가 더 명확하다.
   - 함수의 단계가 중첩되는 것도 막는다는 공통점이 있지만, 2번째의 경우 재사용성이 더욱 높다.
   - filter, map 등의 함수는 우리가 이미 잘 인지하고 있는 함수이다. 함수의 의미를 파악하는게 더 쉽다.

# 스트림 결합

- map 함수를 여러번 체이닝하게 되면, 배열을 여러번 순회하게 된다. map 함수를 한번만 쓰면서, 필요한 로직을 내부에 전부 삽입해주는 것이다.
- 최적화이기 때문에 병목이 생겼을 때만 사용하는게 좋다. 여러 단계를 사용하는 것이 더 명확하고 읽기 쉽다.

# 다양한 함수형 도구

- pluck: 배열(순회 가능한 객체) 내 특정 필드값을 뽑아냄.
- concat,flatMap: 배열 평탄화 (1단계)
- frequenciesBy, groupBy: 개수를 세거나 그룹화 하는 일을 수행, 객체 또는 맵을 리턴함.
